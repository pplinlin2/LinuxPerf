# CPU
## Utilization
#### System-wide
1. `vmstat 1`: `cpu`欄位的`us`、`sy`、`st`總和
  * `us`: user time
  * `sy`: system time
  * `st`: time stolen from a virtual machine
1. `mpstat -P ALL`: 欄位中除了`%idle`和`%iowait`之外的總和
1. `sar -u`: 欄位中除了`%idle`和`%iowait`之外的總和

## Saturation
#### System-wide
1. `vmstat 1`: `procs`欄位的`r` > CPU數量
  * `r`: #runnable process，包括running和waiting for run time
  * `b`: #uninterruptible process
1. `sar -q`: `runq-sz` > CPU數量

## Examples
```console
# vmstat -w 1
procs -----------------------memory---------------------- ---swap-- -----io---- -system-- --------cpu--------
 r  b         swpd         free         buff        cache   si   so    bi    bo   in   cs  us  sy  id  wa  st
 6  0            0     46335304       304104      1885664    0    0     0     1    3    3   2   0  98   0   0
 6  0            0     46335304       304104      1885664    0    0     0     0 1378  324  64   0  36   0   0
 5  0            0     46335304       304104      1885664    0    0     0     0 1386  563  64   0  35   0   0
 4  0            0     51704028       304104      1885664    0    0     0     0 1244  409  54   1  44   0   0
 2  0            0     58861468       304104      1885664    0    0     0     0  793  664  31   2  67   0   0
 0  0            0     62288936       304104      1885664    0    0     0     0  289  606   7   1  92   0   0
 0  0            0     62289288       304104      1885664    0    0     0     0  171  746   3   0  97   0   0
 0  0            0     62288936       304104      1885664    0    0     0     0  147  416   2   0  98   0   0
 0  0            0     62288936       304104      1885664    0    0     0     0  242 1177   7   1  92   0   0
 0  0            0     62288064       304104      1885716    0    0     0     0  228  705   2   0  98   0   0
```
```console
# mpstat -P ALL 1
04:30:01 PM  CPU    %usr   %nice    %sys %iowait    %irq   %soft  %steal  %guest  %gnice   %idle
04:30:02 PM  all   62.45    0.00    1.13    0.00    0.00    0.00    0.00    0.00    0.00   36.42
04:30:02 PM    0   64.00    0.00    4.00    0.00    0.00    0.00    0.00    0.00    0.00   32.00
04:30:02 PM    1  100.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00
04:30:02 PM    2    3.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00   97.00
04:30:02 PM    3   34.34    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00   65.66
04:30:02 PM    4  100.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00
04:30:02 PM    5    2.02    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00   97.98
04:30:02 PM    6  100.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00
04:30:02 PM    7   95.96    0.00    4.04    0.00    0.00    0.00    0.00    0.00    0.00    0.00
```
```console
#  sar -q 1 11
02:45:25 PM   runq-sz  plist-sz   ldavg-1   ldavg-5  ldavg-15   blocked
02:45:26 PM         6       774      0.85      0.28      0.14         0
02:45:27 PM         6       774      0.85      0.28      0.14         0
02:45:28 PM         5       774      1.02      0.33      0.16         0
02:45:29 PM         6       774      1.02      0.33      0.16         0
02:45:30 PM         6       774      1.02      0.33      0.16         0
02:45:31 PM         2       771      1.02      0.33      0.16         0
02:45:32 PM         2       771      1.02      0.33      0.16         0
02:45:33 PM         2       771      1.10      0.35      0.17         0
02:45:34 PM         0       769      1.10      0.35      0.17         0
02:45:35 PM         0       769      1.10      0.35      0.17         0
02:45:36 PM         0       769      1.10      0.35      0.17         0
Average:            3       772      1.02      0.33      0.16         0
```
